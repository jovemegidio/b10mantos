<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finalizar Pedido | B10 Mantos</title>
    <meta name="description" content="Finalize sua compra na B10 Mantos de forma r√°pida e segura pelo WhatsApp.">
    <link rel="stylesheet" href="styles.css?v=20260210v7">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="apple-touch-icon" href="favicon.png">
    <meta name="theme-color" content="#111">
</head>
<body class="checkout-body">

    <!-- CHECKOUT HEADER -->
    <header class="checkout-header">
        <div class="container checkout-header-content">
            <a href="index.html" class="logo"><img src="b10-logo.png" alt="B10 Mantos" class="logo-img"></a>
            <div class="checkout-steps-indicator">
                <div class="step-ind active" data-step="1"><span class="step-num">1</span> <span class="step-text">Revis√£o</span></div>
                <div class="step-line"></div>
                <div class="step-ind" data-step="2"><span class="step-num">2</span> <span class="step-text">Cadastro</span></div>
                <div class="step-line"></div>
                <div class="step-ind" data-step="3"><span class="step-num">3</span> <span class="step-text">Endere√ßo</span></div>
                <div class="step-line"></div>
                <div class="step-ind" data-step="4"><span class="step-num">4</span> <span class="step-text">Enviar</span></div>
            </div>
            <div class="checkout-secure"><i class="fas fa-lock"></i> Compra Segura</div>
        </div>
    </header>

    <!-- CHECKOUT MAIN -->
    <main class="checkout-main">
        <div class="container">
            <div class="checkout-layout">
                <!-- LEFT: FORMS -->
                <div class="checkout-forms">

                    <!-- STEP 1: REVIEW CART -->
                    <div class="checkout-step active" id="checkStep1">
                        <h2><i class="fas fa-shopping-bag"></i> Revise seu Pedido</h2>
                        <div id="ckCartItems"></div>

                        <div class="summary-coupon" style="margin-top:20px;">
                            <label style="font-weight:600;font-size:14px;display:block;margin-bottom:8px;">Tem cupom de desconto?</label>
                            <div class="coupon-input-wrap" id="ckCouponWrap">
                                <input type="text" placeholder="C√≥digo do cupom" id="ckCouponInput">
                                <button type="button" id="ckCouponApply">Aplicar</button>
                            </div>
                            <div class="coupon-applied" id="ckCouponApplied" style="display:none">
                                <i class="fas fa-tag"></i> <span id="ckCouponText"></span>
                                <button type="button" id="ckCouponRemove"><i class="fas fa-times"></i></button>
                            </div>
                        </div>

                        <div style="margin-top:24px;">
                            <button class="btn btn-primary btn-block btn-lg" id="goToStep2Btn">Continuar <i class="fas fa-arrow-right"></i></button>
                            <a href="index.html" class="btn btn-outline btn-block" style="margin-top:10px;text-align:center;"><i class="fas fa-arrow-left"></i> Continuar Comprando</a>
                        </div>
                    </div>

                    <!-- STEP 2: CUSTOMER REGISTRATION / LOGIN -->
                    <div class="checkout-step" id="checkStep2">
                        <h2><i class="fas fa-user-plus"></i> Identifique-se</h2>
                        <p style="color:#64748b;margin-bottom:20px;">Crie uma conta r√°pida ou entre com seus dados para finalizar a compra.</p>

                        <!-- Toggle: Login or Register -->
                        <div class="auth-tabs" id="authTabs">
                            <button type="button" class="auth-tab active" data-tab="register"><i class="fas fa-user-plus"></i> Novo Cadastro</button>
                            <button type="button" class="auth-tab" data-tab="login"><i class="fas fa-sign-in-alt"></i> J√° tenho conta</button>
                        </div>

                        <!-- REGISTER FORM -->
                        <div class="auth-panel active" id="authRegister">
                            <form id="registerForm" novalidate>
                                <div class="form-row">
                                    <div class="form-group"><label>Nome completo *</label><input type="text" id="regName" required placeholder="Bruno Teles"></div>
                                </div>
                                <div class="form-row two-col">
                                    <div class="form-group"><label>WhatsApp *</label><input type="tel" id="regPhone" required placeholder="(11) 99999-9999"></div>
                                    <div class="form-group"><label>E-mail *</label><input type="email" id="regEmail" required placeholder="seu@email.com"></div>
                                </div>
                                <div class="form-row two-col">
                                    <div class="form-group"><label>CPF</label><input type="text" id="regCPF" placeholder="000.000.000-00" maxlength="14"></div>
                                    <div class="form-group"><label>Data de Nascimento</label><input type="date" id="regBirth"></div>
                                </div>
                                <div class="form-row two-col">
                                    <div class="form-group"><label>Senha *</label><input type="password" id="regPass" required placeholder="M√≠nimo 4 caracteres" minlength="4"></div>
                                    <div class="form-group"><label>Confirmar Senha *</label><input type="password" id="regPassConfirm" required placeholder="Repita a senha"></div>
                                </div>
                                <div class="form-error" id="regError" style="display:none"><i class="fas fa-exclamation-circle"></i> <span></span></div>
                                <div class="checkout-nav-btns">
                                    <button type="button" class="btn btn-outline" id="backToStep1from2"><i class="fas fa-arrow-left"></i> Voltar</button>
                                    <button type="submit" class="btn btn-primary btn-lg"><i class="fas fa-user-check"></i> Cadastrar e Continuar</button>
                                </div>
                            </form>
                        </div>

                        <!-- LOGIN FORM -->
                        <div class="auth-panel" id="authLogin">
                            <form id="loginFormCK" novalidate>
                                <div class="form-row two-col">
                                    <div class="form-group"><label>E-mail ou WhatsApp *</label><input type="text" id="loginId" required placeholder="seu@email.com ou (11) 99999-9999"></div>
                                    <div class="form-group"><label>Senha *</label><input type="password" id="loginPassCK" required placeholder="Sua senha"></div>
                                </div>
                                <div class="form-error" id="loginErrorCK" style="display:none"><i class="fas fa-exclamation-circle"></i> <span></span></div>
                                <div class="checkout-nav-btns">
                                    <button type="button" class="btn btn-outline" id="backToStep1from2b"><i class="fas fa-arrow-left"></i> Voltar</button>
                                    <button type="submit" class="btn btn-primary btn-lg"><i class="fas fa-sign-in-alt"></i> Entrar e Continuar</button>
                                </div>
                            </form>
                        </div>

                        <!-- Already logged in message -->
                        <div class="auth-panel" id="authLoggedIn" style="display:none">
                            <div style="text-align:center;padding:24px 0">
                                <div style="width:64px;height:64px;border-radius:50%;background:#dcfce7;color:#16a34a;display:flex;align-items:center;justify-content:center;font-size:28px;margin:0 auto 16px"><i class="fas fa-user-check"></i></div>
                                <h3 style="margin-bottom:6px" id="welcomeBackName">Bem-vindo de volta!</h3>
                                <p style="color:#64748b;font-size:14px;" id="welcomeBackEmail"></p>
                                <div class="checkout-nav-btns" style="margin-top:20px;justify-content:center">
                                    <button type="button" class="btn btn-outline" id="logoutCKBtn"><i class="fas fa-sign-out-alt"></i> Trocar Conta</button>
                                    <button type="button" class="btn btn-primary btn-lg" id="continueLoggedIn"><i class="fas fa-arrow-right"></i> Continuar</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- STEP 3: ADDRESS + DELIVERY -->
                    <div class="checkout-step" id="checkStep3">
                        <h2><i class="fas fa-truck"></i> Endere√ßo de Entrega</h2>
                        <div class="logged-customer-badge" id="loggedCustomerBadge" style="display:none;padding:12px 16px;background:#f0fdf4;border-radius:10px;border:1px solid #bbf7d0;margin-bottom:20px;display:flex;align-items:center;gap:10px">
                            <i class="fas fa-user-circle" style="color:#16a34a;font-size:20px"></i>
                            <div><strong id="badgeName" style="font-size:14px"></strong> <span id="badgeEmail" style="font-size:12px;color:#64748b;margin-left:6px"></span></div>
                        </div>
                        <form id="customerForm" novalidate>

                            <div class="form-row two-col">
                                <div class="form-group"><label>CEP *</label><input type="text" id="ckCEP" required placeholder="00000-000" maxlength="9"><small class="cep-link"><a href="https://buscacepinter.correios.com.br/app/endereco/index.php" target="_blank">N√£o sei meu CEP</a></small></div>
                                <div class="form-group"><label>Cidade *</label><input type="text" id="ckCity" required placeholder="S√£o Paulo"></div>
                            </div>
                            <div class="form-row two-col">
                                <div class="form-group"><label>Estado *</label>
                                    <select id="ckState" required>
                                        <option value="">Selecione</option>
                                        <option>AC</option><option>AL</option><option>AP</option><option>AM</option><option>BA</option><option>CE</option><option>DF</option><option>ES</option><option>GO</option><option>MA</option><option>MT</option><option>MS</option><option>MG</option><option>PA</option><option>PB</option><option>PR</option><option>PE</option><option>PI</option><option>RJ</option><option>RN</option><option>RS</option><option>RO</option><option>RR</option><option>SC</option><option>SP</option><option>SE</option><option>TO</option>
                                    </select>
                                </div>
                                <div class="form-group"><label>Bairro *</label><input type="text" id="ckNeighbor" required placeholder="Centro"></div>
                            </div>
                            <div class="form-row">
                                <div class="form-group"><label>Endere√ßo *</label><input type="text" id="ckAddress" required placeholder="Rua, Avenida..."></div>
                            </div>
                            <div class="form-row two-col">
                                <div class="form-group"><label>N√∫mero *</label><input type="text" id="ckNumber" required placeholder="123"></div>
                                <div class="form-group"><label>Complemento</label><input type="text" id="ckComp" placeholder="Apto, Bloco..."></div>
                            </div>

                            <div class="form-error" id="formError" style="display:none;"><i class="fas fa-exclamation-circle"></i> <span>Preencha todos os campos obrigat√≥rios.</span></div>

                            <div class="checkout-nav-btns">
                                <button type="button" class="btn btn-outline" id="backToStep2"><i class="fas fa-arrow-left"></i> Voltar</button>
                                <button type="submit" class="btn btn-whatsapp btn-lg"><i class="fab fa-whatsapp"></i> Enviar Pedido pelo WhatsApp</button>
                            </div>
                        </form>
                    </div>

                    <!-- STEP 4: WHATSAPP REDIRECT -->
                    <div class="checkout-step" id="checkStep4">
                        <div class="order-confirmed">
                            <div class="confirm-icon" style="color:#25d366;font-size:64px;"><i class="fab fa-whatsapp"></i></div>
                            <h2>Pedido Pronto! üéâ</h2>
                            <p style="font-size:16px;color:#64748b;max-width:480px;margin:0 auto 24px;">Clique no bot√£o abaixo para enviar seu pedido pelo WhatsApp. Nossa equipe ir√° confirmar e combinar o pagamento com voc√™.</p>

                            <div class="confirm-details" id="orderReviewBox"></div>

                            <div style="margin-top:30px;display:flex;flex-direction:column;align-items:center;">
                                <a href="#" id="finalWhatsAppBtn" target="_blank" rel="noopener" class="btn btn-whatsapp btn-lg" style="font-size:18px;padding:18px 48px;gap:12px;"><i class="fab fa-whatsapp"></i> Enviar Pedido pelo WhatsApp</a>
                                <p style="font-size:13px;color:#64748b;margin-top:14px;">Aceitamos PIX, Cart√£o e Boleto ‚Ä¢ Pagamento combinado pelo WhatsApp</p>
                            </div>

                            <div class="how-it-works-box">
                                <h4><i class="fas fa-shield-alt" style="color:#10b981;"></i> Como funciona?</h4>
                                <div class="how-steps">
                                    <p>1Ô∏è‚É£ Voc√™ envia o pedido pelo WhatsApp</p>
                                    <p>2Ô∏è‚É£ Confirmamos disponibilidade e valor</p>
                                    <p>3Ô∏è‚É£ Combinamos forma de pagamento (PIX, Cart√£o ou Boleto)</p>
                                    <p>4Ô∏è‚É£ Enviamos com c√≥digo de rastreamento</p>
                                </div>
                            </div>

                            <div style="margin-top:20px;">
                                <a href="index.html" class="btn btn-outline"><i class="fas fa-arrow-left"></i> Voltar para a Loja</a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- RIGHT: ORDER SUMMARY -->
                <div class="checkout-summary" id="checkoutSummary">
                    <div class="summary-card">
                        <h3><i class="fas fa-receipt"></i> Resumo do Pedido</h3>
                        <div class="summary-items" id="summaryItems"></div>
                        <div class="summary-separator"></div>

                        <div class="summary-totals">
                            <div class="summary-row"><span>Subtotal</span><strong id="sumSubtotal">R$ 0,00</strong></div>
                            <div class="summary-row" id="sumDiscountRow" style="display:none"><span>Desconto</span><strong id="sumDiscount" style="color:#10b981">- R$ 0,00</strong></div>
                            <div class="summary-row total"><span>Total</span><strong id="sumTotal">R$ 0,00</strong></div>
                            <div class="summary-row pix-row"><span><i class="fab fa-pix"></i> <span id="sumPixLabel">Total no PIX (5% OFF)</span></span><strong id="sumPixTotal" style="color:#10b981">R$ 0,00</strong></div>
                        </div>

                        <div style="margin-top:16px;padding:12px;background:#f0fdf4;border-radius:10px;text-align:center;">
                            <p style="font-size:13px;color:#059669;font-weight:600;margin:0;" id="sumPixBanner"><i class="fab fa-pix"></i> Ganhe 5% de desconto pagando via PIX</p>
                        </div>

                        <div class="summary-trust">
                            <div class="st-item"><i class="fas fa-shield-alt"></i> Compra Segura</div>
                            <div class="st-item"><i class="fas fa-undo"></i> 7 dias devolu√ß√£o</div>
                            <div class="st-item"><i class="fas fa-medal"></i> Qualidade Premium</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="checkout.js?v=20260210v7"></script>
</body>
</html>
